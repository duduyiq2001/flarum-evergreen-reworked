{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@kyrne/evergreen/./node_modules/textarea-caret/index.js","webpack://@kyrne/evergreen/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@kyrne/evergreen/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@kyrne/evergreen/./node_modules/@babel/runtime/regenerator/index.js","webpack://@kyrne/evergreen/webpack/bootstrap","webpack://@kyrne/evergreen/webpack/runtime/compat get default export","webpack://@kyrne/evergreen/webpack/runtime/define property getters","webpack://@kyrne/evergreen/webpack/runtime/hasOwnProperty shorthand","webpack://@kyrne/evergreen/webpack/runtime/make namespace object","webpack://@kyrne/evergreen/external root \"flarum.core.compat['app']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['extend']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/Alert']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/Button']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/CommentPost']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['models/Post']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['Model']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/ReplyComposer']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/LogInModal']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/NotificationGrid']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['utils/string']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/PostPreview']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/Link']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['helpers/punctuateSeries']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['helpers/username']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['helpers/icon']\"","webpack://@kyrne/evergreen/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/EditPostComposer']\"","webpack://@kyrne/evergreen/./src/forum/utils/reply.js","webpack://@kyrne/evergreen/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@kyrne/evergreen/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@kyrne/evergreen/external root \"flarum.core.compat['utils/extract']\"","webpack://@kyrne/evergreen/./src/forum/components/PostQuoteButton.js","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/ComposerBody']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/TextEditor']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/TextEditorButton']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['helpers/avatar']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['helpers/highlight']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['utils/KeyboardNavigatable']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['Component']\"","webpack://@kyrne/evergreen/./src/forum/components/AutocompleteDropdown.js","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/Notification']\"","webpack://@kyrne/evergreen/./src/forum/components/PostMentionedNotification.js","webpack://@kyrne/evergreen/./src/forum/components/UserMentionedNotification.js","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/UserPage']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/LinkButton']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/PostsUserPage']\"","webpack://@kyrne/evergreen/./src/forum/components/MentionsUserPage.js","webpack://@kyrne/evergreen/external root \"flarum.core.compat['components/Post']\"","webpack://@kyrne/evergreen/external root \"flarum.core.compat['utils/extractText']\"","webpack://@kyrne/evergreen/./src/forum/utils/textFormatter.js","webpack://@kyrne/evergreen/./src/forum/index.js","webpack://@kyrne/evergreen/./src/forum/addPostMentionPreviews.js","webpack://@kyrne/evergreen/./src/forum/addMentionedByList.js","webpack://@kyrne/evergreen/./src/forum/addPostReplyAction.js","webpack://@kyrne/evergreen/./src/forum/addPostQuoteButton.js","webpack://@kyrne/evergreen/./src/forum/utils/selectedText.js","webpack://@kyrne/evergreen/./src/forum/addComposerAutocomplete.js","webpack://@kyrne/evergreen/./src/forum/MakeTree.tsx"],"sourcesContent":["/* jshint browser: true */\n\n(function () {\n\n// We'll copy the properties below into the mirror div.\n// Note that some browsers, such as Firefox, do not concatenate properties\n// into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),\n// so we have to list every single property explicitly.\nvar properties = [\n  'direction',  // RTL support\n  'boxSizing',\n  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height',\n  'overflowX',\n  'overflowY',  // copy the scrollbar for IE\n\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderStyle',\n\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration',  // might not make a difference, but better be safe\n\n  'letterSpacing',\n  'wordSpacing',\n\n  'tabSize',\n  'MozTabSize'\n\n];\n\nvar isBrowser = (typeof window !== 'undefined');\nvar isFirefox = (isBrowser && window.mozInnerScreenX != null);\n\nfunction getCaretCoordinates(element, position, options) {\n  if (!isBrowser) {\n    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n  }\n\n  var debug = options && options.debug || false;\n  if (debug) {\n    var el = document.querySelector('#input-textarea-caret-position-mirror-div');\n    if (el) el.parentNode.removeChild(el);\n  }\n\n  // The mirror div will replicate the textarea's style\n  var div = document.createElement('div');\n  div.id = 'input-textarea-caret-position-mirror-div';\n  document.body.appendChild(div);\n\n  var style = div.style;\n  var computed = window.getComputedStyle ? window.getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\n  var isInput = element.nodeName === 'INPUT';\n\n  // Default textarea styles\n  style.whiteSpace = 'pre-wrap';\n  if (!isInput)\n    style.wordWrap = 'break-word';  // only for textarea-s\n\n  // Position off-screen\n  style.position = 'absolute';  // required to return coordinates properly\n  if (!debug)\n    style.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n  // Transfer the element's properties to the div\n  properties.forEach(function (prop) {\n    if (isInput && prop === 'lineHeight') {\n      // Special case for <input>s because text is rendered centered and line height may be != height\n      style.lineHeight = computed.height;\n    } else {\n      style[prop] = computed[prop];\n    }\n  });\n\n  if (isFirefox) {\n    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n    if (element.scrollHeight > parseInt(computed.height))\n      style.overflowY = 'scroll';\n  } else {\n    style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n  }\n\n  div.textContent = element.value.substring(0, position);\n  // The second special handling for input type=\"text\" vs textarea:\n  // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n  if (isInput)\n    div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n\n  var span = document.createElement('span');\n  // Wrapping must be replicated *exactly*, including when a long word gets\n  // onto the next line, with whitespace at the end of the line before (#7).\n  // The  *only* reliable way to do that is to copy the *entire* rest of the\n  // textarea's content into the <span> created at the caret position.\n  // For inputs, just '.' would be enough, but no need to bother.\n  span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n  div.appendChild(span);\n\n  var coordinates = {\n    top: span.offsetTop + parseInt(computed['borderTopWidth']),\n    left: span.offsetLeft + parseInt(computed['borderLeftWidth']),\n    height: parseInt(computed['lineHeight'])\n  };\n\n  if (debug) {\n    span.style.backgroundColor = '#aaa';\n  } else {\n    document.body.removeChild(div);\n  }\n\n  return coordinates;\n}\n\nif (typeof module != 'undefined' && typeof module.exports != 'undefined') {\n  module.exports = getCaretCoordinates;\n} else if(isBrowser) {\n  window.getCaretCoordinates = getCaretCoordinates;\n}\n\n}());\n","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw new Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['models/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/ReplyComposer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/NotificationGrid'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/string'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/PostPreview'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/punctuateSeries'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/icon'];","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/EditPostComposer'];","import DiscussionControls from \"flarum/utils/DiscussionControls\";\nimport EditPostComposer from \"flarum/components/EditPostComposer\";\n\nfunction insertMention(post, composer, quote) {\n  const user = post.user();\n  const mention =\n    \"@\" + (user ? user.username() : post.number()) + \"#\" + post.id() + \" \";\n\n  // If the composer is empty, then assume we're starting a new reply.\n  // In which case we don't want the user to have to confirm if they\n  // close the composer straight away.\n  if (!composer.fields.content()) {\n    composer.body.attrs.originalContent = mention;\n  }\n\n  const cursorPosition = composer.editor.getSelectionRange()[0];\n  const preceding = composer.fields.content().slice(0, cursorPosition);\n  const precedingNewlines =\n    preceding.length == 0 ? 0 : 3 - preceding.match(/(\\n{0,2})$/)[0].length;\n\n  composer.editor.insertAtCursor(\n    Array(precedingNewlines).join(\"\\n\") + // Insert up to two newlines, depending on preceding whitespace\n      (quote\n        ? \"> \" + mention + quote.trim().replace(/\\n/g, \"\\n> \") + \"\\n\\n\"\n        : mention)\n  );\n}\n\nexport default async function reply(post, quote) {\n  if (\n    app.composer.bodyMatches(EditPostComposer) &&\n    app.composer.body.attrs.post.discussion() === post.discussion()\n  ) {\n    // If we're already editing a post in the discussion of post we're quoting,\n    // insert the mention directly.\n    insertMention(post, app.composer, quote);\n  } else {\n    // The default \"Reply\" action behavior will only open a new composer if\n    // necessary, but it will always be a ReplyComposer, hence the exceptional\n    // case above.\n    let replyId = post.id();\n    if (post.replyTo() > 0) {\n      replyId = post.replyTo();\n    }\n\n    await DiscussionControls.replyAction\n      .call(post.discussion(), false, false, replyId)\n      .then((composer) => insertMention(post, composer, quote));\n  }\n}\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/extract'];","import Button from 'flarum/components/Button';\nimport extract from 'flarum/utils/extract';\n\nimport reply from '../utils/reply';\n\nexport default class PostQuoteButton extends Button {\n  view() {\n    const post = extract(this.attrs, 'post');\n    const content = extract(this.attrs, 'content');\n\n    this.attrs.className = 'Button PostQuoteButton';\n    this.attrs.icon = 'fas fa-quote-left';\n    this.attrs.children = app.translator.trans('flarum-mentions.forum.post.quote_button');\n    this.attrs.onclick = () => {\n      this.hide();\n      reply(post, content);\n    };\n    this.attrs.onmousedown = (e) => e.stopPropagation();\n\n    return super.view();\n  }\n\n  config(isInitialized) {\n    if (isInitialized) return;\n\n    $(document).on('mousedown', this.hide.bind(this));\n  }\n\n  show(left, top) {\n    const $this = this.$().show();\n    const parentOffset = $this.offsetParent().offset();\n\n    $this\n      .css('left', left - parentOffset.left)\n      .css('top', top - parentOffset.top);\n  }\n\n  showStart(left, top) {\n    const $this = this.$();\n\n    this.show(left, $(window).scrollTop() + top - $this.outerHeight() - 5);\n  }\n\n  showEnd(right, bottom) {\n    const $this = this.$();\n\n    this.show(right - $this.outerWidth(), $(window).scrollTop() + bottom + 5);\n  }\n\n  hide() {\n    this.$().hide();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/ComposerBody'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/TextEditor'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/TextEditorButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/highlight'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/KeyboardNavigatable'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Component'];","import Component from 'flarum/Component';\n\nexport default class AutocompleteDropdown extends Component {\n  init() {\n    this.active = false;\n    this.index = 0;\n    this.keyWasJustPressed = false;\n  }\n\n  view() {\n    return (\n      <ul className=\"Dropdown-menu MentionsDropdown\">\n        {this.attrs.items.map(item => <li>{item}</li>)}\n      </ul>\n    );\n  }\n\n  show(left, top) {\n    this.$().show().css({\n      left: left + 'px',\n      top: top + 'px'\n    });\n    this.active = true;\n  }\n\n  hide() {\n    this.$().hide();\n    this.active = false;\n  }\n\n  navigate(delta) {\n    this.keyWasJustPressed = true;\n    this.setIndex(this.index + delta, true);\n    clearTimeout(this.keyWasJustPressedTimeout);\n    this.keyWasJustPressedTimeout = setTimeout(() => this.keyWasJustPressed = false, 500);\n  }\n\n  complete() {\n    this.$('li').eq(this.index).find('button').click();\n  }\n\n  setIndex(index, scrollToItem) {\n    if (this.keyWasJustPressed && !scrollToItem) return;\n\n    const $dropdown = this.$();\n    const $items = $dropdown.find('li');\n    let rangedIndex = index;\n\n    if (rangedIndex < 0) {\n      rangedIndex = $items.length - 1;\n    } else if (rangedIndex >= $items.length) {\n      rangedIndex = 0;\n    }\n\n    this.index = rangedIndex;\n\n    const $item = $items.removeClass('active').eq(rangedIndex).addClass('active');\n\n    if (scrollToItem) {\n      const dropdownScroll = $dropdown.scrollTop();\n      const dropdownTop = $dropdown.offset().top;\n      const dropdownBottom = dropdownTop + $dropdown.outerHeight();\n      const itemTop = $item.offset().top;\n      const itemBottom = itemTop + $item.outerHeight();\n\n      let scrollTop;\n      if (itemTop < dropdownTop) {\n        scrollTop = dropdownScroll - dropdownTop + itemTop - parseInt($dropdown.css('padding-top'), 10);\n      } else if (itemBottom > dropdownBottom) {\n        scrollTop = dropdownScroll - dropdownBottom + itemBottom + parseInt($dropdown.css('padding-bottom'), 10);\n      }\n\n      if (typeof scrollTop !== 'undefined') {\n        $dropdown.stop(true).animate({scrollTop}, 100);\n      }\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Notification'];","import Notification from 'flarum/components/Notification';\nimport { truncate } from 'flarum/utils/string';\n\nexport default class PostMentionedNotification extends Notification {\n  icon() {\n    return 'fas fa-reply';\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n    const post = notification.subject();\n    const content = notification.content();\n\n    return app.route.discussion(post.discussion(), content && content.replyNumber);\n  }\n\n  content() {\n    const notification = this.attrs.notification;\n    const user = notification.fromUser();\n\n    return app.translator.transChoice('flarum-mentions.forum.notifications.post_mentioned_text', 1, {user});\n  }\n\n  excerpt() {\n    return truncate(this.attrs.notification.subject().contentPlain(), 200);\n  }\n}\n","import Notification from 'flarum/components/Notification';\nimport { truncate } from 'flarum/utils/string';\n\nexport default class UserMentionedNotification extends Notification {\n  icon() {\n    return 'fas fa-at';\n  }\n\n  href() {\n    const post = this.attrs.notification.subject();\n\n    return app.route.discussion(post.discussion(), post.number());\n  }\n\n  content() {\n    const user = this.attrs.notification.fromUser();\n\n    return app.translator.trans('flarum-mentions.forum.notifications.user_mentioned_text', {user});\n  }\n\n  excerpt() {\n    return truncate(this.attrs.notification.subject().contentPlain(), 200);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/PostsUserPage'];","import PostsUserPage from 'flarum/components/PostsUserPage';\n\n/**\n * The `MentionsUserPage` component shows post which user Mentioned at\n */\nexport default class MentionsUserPage extends PostsUserPage {\n  /**\n   * Load a new page of the user's activity feed.\n   *\n   * @param {Integer} [offset] The position to start getting results from.\n   * @return {Promise}\n   * @protected\n   */\n  loadResults(offset) {\n    return app.store.find('posts', {\n      filter: {\n        type: 'comment',\n        mentioned: this.user.id()\n      },\n      page: {offset, limit: this.loadLimit},\n      sort: '-createdAt'\n    });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/extractText'];","import username from 'flarum/helpers/username';\nimport extractText from 'flarum/utils/extractText';\n\nexport function filterUserMentions(tag) {\n  const user = app.store.getBy('users', 'username', tag.getAttribute('username'));\n\n  if (user) {\n    tag.setAttribute('id', user.id());\n    tag.setAttribute('displayname', extractText(username(user)));\n\n    return true;\n  }\n}\n\nexport function filterPostMentions(tag) {\n  const post = app.store.getById('posts', tag.getAttribute('id'));\n\n  if (post) {\n    tag.setAttribute('discussionid', post.discussion().id());\n    tag.setAttribute('number', post.number());\n    tag.setAttribute('displayname', extractText(username(post.user())));\n\n    return true;\n  }\n}\n","import app from \"flarum/app\";\nimport { extend, override } from \"flarum/extend\";\nimport DiscussionControls from \"flarum/utils/DiscussionControls\";\nimport Alert from \"flarum/components/Alert\";\nimport Button from \"flarum/components/Button\";\nimport CommentPost from \"flarum/components/CommentPost\";\n\nimport Post from \"flarum/models/Post\";\nimport Model from \"flarum/Model\";\nimport ReplyComposer from \"flarum/components/ReplyComposer\";\nimport LogInModal from \"flarum/components/LogInModal\";\n\nimport NotificationGrid from \"flarum/components/NotificationGrid\";\nimport { getPlainContent } from \"flarum/utils/string\";\n\nimport addPostMentionPreviews from \"./addPostMentionPreviews\";\nimport addMentionedByList from \"./addMentionedByList\";\nimport addPostReplyAction from \"./addPostReplyAction\";\nimport addPostQuoteButton from \"./addPostQuoteButton\";\nimport addComposerAutocomplete from \"./addComposerAutocomplete\";\nimport PostMentionedNotification from \"./components/PostMentionedNotification\";\nimport UserMentionedNotification from \"./components/UserMentionedNotification\";\nimport UserPage from \"flarum/components/UserPage\";\nimport LinkButton from \"flarum/components/LinkButton\";\nimport MentionsUserPage from \"./components/MentionsUserPage\";\n\nimport MakeTree from \"./MakeTree\";\n\napp.initializers.add(\"kyrne-everygreen\", () => {\n  Post.prototype.replyTo = Model.attribute(\"replyTo\");\n  Post.prototype.replyCount = Model.attribute(\"replyCount\");\n  //m.redraw.strategy(\"all\");\n\n  DiscussionControls.replyAction = function (goToLast, forceRefresh, replyTo) {\n    return new Promise((resolve, reject) => {\n      if (app.session.user) {\n        if (this.canReply()) {\n          if (!app.composer.composingReplyTo(this) || forceRefresh) {\n            app.composer.load(ReplyComposer, {\n              user: app.session.user,\n              discussion: this,\n              replyTo,\n            });\n          }\n          app.composer.show();\n\n          if (\n            goToLast &&\n            app.viewingDiscussion(this) &&\n            !app.composer.isFullScreen()\n          ) {\n            app.current.get(\"stream\").goToNumber(\"reply\");\n          }\n\n          return resolve(app.composer);\n        } else {\n          return reject();\n        }\n      }\n\n      app.modal.show(LogInModal);\n\n      return reject();\n    });\n  };\n\n  extend(ReplyComposer.prototype, \"oninit\", function () {\n    this.replyTo = this.attrs.replyTo;\n  });\n\n  extend(ReplyComposer.prototype, \"data\", function (data) {\n    data.replyTo = this.replyTo;\n  });\n\n  override(ReplyComposer.prototype, \"onsubmit\", function () {\n    const discussion = this.attrs.discussion;\n\n    this.loading = true;\n    m.redraw();\n\n    const data = this.data();\n\n    app.store\n      .createRecord(\"posts\")\n      .save(data)\n      .then((post) => {\n        if (this.draft) {\n          this.draft.delete();\n        }\n        // If we're currently viewing the discussion which this reply was made\n        // in, then we can update the post stream and scroll to the post.\n        if (app.viewingDiscussion(discussion)) {\n          const stream = app.current.get(\"stream\");\n          stream.update().then(() => {\n            stream.goToNumber(post.number());\n            console.log(\"uuuuu\");\n            m.redraw().sync();\n          });\n          // console.log(\"redrawing 4\");\n          //m.redraw();\n        } else {\n          // Otherwise, we'll create an alert message to inform the user that\n          // their reply has been posted, containing a button which will\n          // transition to their new post when clicked.\n          let alert;\n          const viewButton = Button.component(\n            {\n              className: \"Button Button--link\",\n              onclick: () => {\n                m.route.set(app.route.post(post));\n                app.alerts.dismiss(alert);\n              },\n            },\n            app.translator.trans(\"core.forum.composer_reply.view_button\")\n          );\n          alert = app.alerts.show(\n            {\n              type: \"success\",\n              controls: [viewButton],\n            },\n            app.translator.trans(\"core.forum.composer_reply.posted_message\")\n          );\n        }\n\n        app.composer.hide();\n      }, this.loaded.bind(this));\n  });\n\n  // For every mention of a post inside a post's content, set up a hover handler\n  // that shows a preview of the mentioned post.\n  addPostMentionPreviews();\n\n  // In the footer of each post, show information about who has replied (i.e.\n  // who the post has been mentioned by).\n  addMentionedByList();\n\n  // Add a 'reply' control to the footer of each post. When clicked, it will\n  // open up the composer and add a post mention to its contents.\n  addPostReplyAction();\n\n  // Show a Quote button when Post text is selected\n  addPostQuoteButton();\n\n  // After typing '@' in the composer, show a dropdown suggesting a bunch of\n  // posts or users that the user could mention.\n  addComposerAutocomplete();\n\n  MakeTree();\n\n  app.notificationComponents.postMentioned = PostMentionedNotification;\n  app.notificationComponents.userMentioned = UserMentionedNotification;\n\n  // Add notification preferences.\n  extend(NotificationGrid.prototype, \"notificationTypes\", function (items) {\n    items.add(\"postMentioned\", {\n      name: \"postMentioned\",\n      icon: \"fas fa-reply\",\n      label: app.translator.trans(\n        \"flarum-mentions.forum.settings.notify_post_mentioned_label\"\n      ),\n    });\n\n    items.add(\"userMentioned\", {\n      name: \"userMentioned\",\n      icon: \"fas fa-at\",\n      label: app.translator.trans(\n        \"flarum-mentions.forum.settings.notify_user_mentioned_label\"\n      ),\n    });\n  });\n\n  // Add mentions tab in user profile\n  app.routes[\"user.mentions\"] = {\n    path: \"/u/:username/mentions\",\n    component: MentionsUserPage,\n  };\n  extend(UserPage.prototype, \"navItems\", function (items) {\n    const user = this.user;\n    items.add(\n      \"mentions\",\n      LinkButton.component(\n        {\n          href: app.route(\"user.mentions\", { username: user.slug() }),\n          name: \"mentions\",\n          icon: \"fas fa-at\",\n        },\n        app.translator.trans(\"flarum-mentions.forum.user.mentions_link\")\n      ),\n      80\n    );\n  });\n\n  // Remove post mentions when rendering post previews.\n  getPlainContent.removeSelectors.push(\"a.PostMention\");\n});\nextend(Post.prototype, \"oninit\", function () {\n  this.uniqueKey = Date.now();\n});\nextend(Post.prototype, \"forceRerender\", function () {\n  this.uniqueKey = Date.now();\n  m.redraw();\n});\nextend(Post.prototype, \"onbeforeupdate\", function (original, vnode) {\n  return true;\n});\nexport * from \"./utils/textFormatter\";\n","import { extend } from 'flarum/extend';\nimport CommentPost from 'flarum/components/CommentPost';\nimport PostPreview from 'flarum/components/PostPreview';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\n\nexport default function addPostMentionPreviews() {\n  function addPreviews() {\n    const contentHtml = this.attrs.post.contentHtml();\n\n    if (contentHtml === this.oldPostContentHtml || this.isEditing()) return;\n\n    this.oldPostContentHtml = contentHtml;\n\n    const parentPost = this.attrs.post;\n    const $parentPost = this.$();\n\n    this.$().on('click', '.UserMention:not(.UserMention--deleted), .PostMention:not(.PostMention--deleted)', function (e) {\n      m.route.set(this.getAttribute('href'));\n      e.preventDefault();\n    });\n\n    this.$('.PostMention:not(.PostMention--deleted)').each(function() {\n      const $this = $(this);\n      const id = $this.data('id');\n      let timeout;\n\n      // Wrap the mention link in a wrapper element so that we can insert a\n      // preview popup as its sibling and relatively position it.\n      const $preview = $('<ul class=\"Dropdown-menu PostMention-preview fade\"/>');\n      $parentPost.append($preview);\n\n      const getPostElement = () => {\n        return $(`.PostStream-item[data-id=\"${id}\"]`);\n      };\n\n      const showPreview = () => {\n        // When the user hovers their mouse over the mention, look for the\n        // post that it's referring to in the stream, and determine if it's\n        // in the viewport. If it is, we will \"pulsate\" it.\n        const $post = getPostElement();\n        let visible = false;\n        if ($post.length) {\n          const top = $post.offset().top;\n          const scrollTop = window.pageYOffset;\n          if (top > scrollTop && top + $post.height() < scrollTop + $(window).height()) {\n            $post.addClass('pulsate');\n            visible = true;\n          }\n        }\n\n        // Otherwise, we will show a popup preview of the post. If the post\n        // hasn't yet been loaded, we will need to do that.\n        if (!visible) {\n          // Position the preview so that it appears above the mention.\n          // (The offsetParent should be .Post-body.)\n          const positionPreview = () => {\n            const previewHeight = $preview.outerHeight(true);\n            let offset = 0;\n\n            // If the preview goes off the top of the viewport, reposition it to\n            // be below the mention.\n            if ($this.offset().top - previewHeight < $(window).scrollTop() + $('#header').outerHeight()) {\n              offset += $this.outerHeight(true);\n            } else {\n              offset -= previewHeight;\n            }\n\n            $preview.show()\n              .css('top', $this.offset().top - $parentPost.offset().top + offset)\n              .css('left', $this.offsetParent().offset().left - $parentPost.offset().left)\n              .css('max-width', $this.offsetParent().width());\n          };\n\n          const showPost = post => {\n            const discussion = post.discussion();\n\n            m.render($preview[0], [\n              discussion !== parentPost.discussion()\n                ? <li><span className=\"PostMention-preview-discussion\">{discussion.title()}</span></li>\n                : '',\n              <li>{PostPreview.component({post})}</li>\n            ]);\n            positionPreview();\n          };\n\n          const post = app.store.getById('posts', id);\n          if (post && post.discussion()) {\n            showPost(post);\n          } else {\n            m.render($preview[0], LoadingIndicator.component());\n            app.store.find('posts', id).then(showPost);\n            positionPreview();\n          }\n\n          setTimeout(() => $preview.off('transitionend').addClass('in'));\n        }\n      };\n\n      const hidePreview = () => {\n        getPostElement().removeClass('pulsate');\n        if ($preview.hasClass('in')) {\n          $preview.removeClass('in').one('transitionend', () => $preview.hide());\n        }\n      };\n\n      // On a touch (mobile) device we cannot hover the link to reveal the preview.\n      // Instead we cancel the navigation so that a click reveals the preview.\n      // Users can then click on the preview to go to the post if desired.\n      $this.on('touchend', e => {\n        if (e.cancelable) {\n          e.preventDefault();\n        }\n      });\n\n      $this.add($preview).hover(\n        () => {\n          clearTimeout(timeout);\n          timeout = setTimeout(showPreview, 250);\n        },\n        () => {\n          clearTimeout(timeout);\n          getPostElement().removeClass('pulsate');\n          timeout = setTimeout(hidePreview, 250);\n        }\n      )\n        .on('touchend', e => {\n          showPreview();\n          e.stopPropagation();\n        });\n\n      $(document).on('touchend', hidePreview);\n    });\n  }\n\n  extend(CommentPost.prototype, 'oncreate', addPreviews);\n  extend(CommentPost.prototype, 'onupdate', addPreviews);\n}\n","import { extend } from 'flarum/extend';\nimport Model from 'flarum/Model';\nimport Post from 'flarum/models/Post';\nimport CommentPost from 'flarum/components/CommentPost';\nimport Link from 'flarum/components/Link';\nimport PostPreview from 'flarum/components/PostPreview';\nimport punctuateSeries from 'flarum/helpers/punctuateSeries';\nimport username from 'flarum/helpers/username';\nimport icon from 'flarum/helpers/icon';\n\nexport default function addMentionedByList() {\n  Post.prototype.mentionedBy = Model.hasMany('mentionedBy');\n\n  function hidePreview() {\n    this.$('.Post-mentionedBy-preview')\n      .removeClass('in')\n      .one('transitionend', function() { $(this).hide(); });\n  }\n\n  extend(CommentPost.prototype, 'oncreate', function() {\n    let timeout;\n    const post = this.attrs.post;\n    const replies = post.mentionedBy();\n\n    if (replies && replies.length) {\n      const $preview = $('<ul class=\"Dropdown-menu Post-mentionedBy-preview fade\"/>');\n      this.$().append($preview);\n\n      const $parentPost = this.$();\n      const $this = this.$('.Post-mentionedBy');\n\n      const showPreview = () => {\n        if (!$preview.hasClass('in') && $preview.is(':visible')) return;\n\n        // When the user hovers their mouse over the list of people who have\n        // replied to the post, render a list of reply previews into a\n        // popup.\n        m.render($preview[0], replies.map(reply => (\n          <li data-number={reply.number()}>\n            {PostPreview.component({\n              post: reply,\n              onclick: hidePreview.bind(this)\n            })}\n          </li>\n        )));\n\n        $preview.show()\n          .css('top', $this.offset().top - $parentPost.offset().top + $this.outerHeight(true))\n          .css('left', $this.offsetParent().offset().left - $parentPost.offset().left)\n          .css('max-width', $parentPost.width());\n\n        setTimeout(() => $preview.off('transitionend').addClass('in'));\n      }\n\n      $this.add($preview).hover(\n        () => {\n          clearTimeout(timeout);\n          timeout = setTimeout(showPreview, 250);\n        },\n        () => {\n          clearTimeout(timeout);\n          timeout = setTimeout(hidePreview, 250);\n        }\n      );\n\n      // Whenever the user hovers their mouse over a particular name in the\n      // list of repliers, highlight the corresponding post in the preview\n      // popup.\n      this.$().find('.Post-mentionedBy-summary a').hover(function() {\n        $preview.find('[data-number=\"' + $(this).data('number') + '\"]').addClass('active');\n      }, function() {\n        $preview.find('[data-number]').removeClass('active');\n      });\n    }\n  });\n\n  extend(CommentPost.prototype, 'footerItems', function(items) {\n    const post = this.attrs.post;\n    const replies = post.mentionedBy();\n\n    if (replies && replies.length) {\n      const users = [];\n      const repliers = replies\n        .sort(reply => reply.user() === app.session.user ? -1 : 0)\n        .filter(reply => {\n          const user = reply.user();\n          if (users.indexOf(user) === -1) {\n            users.push(user);\n            return true;\n          }\n        });\n\n      const limit = 4;\n      const overLimit = repliers.length > limit;\n\n      // Create a list of unique users who have replied. So even if a user has\n      // replied twice, they will only be in this array once.\n      const names = repliers\n        .slice(0, overLimit ? limit - 1 : limit)\n        .map(reply => {\n          const user = reply.user();\n\n          return (\n            <Link href={app.route.post(reply)}\n                  onclick={hidePreview.bind(this)}\n                  data-number={reply.number()}>\n              {app.session.user === user ? app.translator.trans('flarum-mentions.forum.post.you_text') : username(user)}\n            </Link>\n          );\n        });\n\n      // If there are more users that we've run out of room to display, add a \"x\n      // others\" name to the end of the list. Clicking on it will display a modal\n      // with a full list of names.\n      if (overLimit) {\n        const count = repliers.length - names.length;\n\n        names.push(\n          app.translator.trans('flarum-mentions.forum.post.others_text', {count})\n        );\n      }\n\n      items.add('replies',\n        <div className=\"Post-mentionedBy\">\n          <span className=\"Post-mentionedBy-summary\">\n            {icon('fas fa-reply')}\n            {app.translator.trans('flarum-mentions.forum.post.mentioned_by' + (repliers[0].user() === app.session.user ? '_self' : '') + '_text', {\n              count: names.length,\n              users: punctuateSeries(names)\n            })}\n          </span>\n        </div>\n      );\n    }\n  });\n}\n","import { extend } from \"flarum/extend\";\nimport Button from \"flarum/components/Button\";\nimport CommentPost from \"flarum/components/CommentPost\";\n\nimport reply from \"./utils/reply\";\n\nexport default function() {\n  extend(CommentPost.prototype, \"actionItems\", function(items) {\n    const post = this.attrs.post;\n\n    if (post.isHidden() || (app.session.user && !post.discussion().canReply()))\n      return;\n\n    items.add(\n      \"reply\",\n      <Button\n        className=\"Button Button--link\"\n        onclick={async () => {\n          await reply(post);\n          console.log(\"redrawing\");\n          m.redraw();\n        }}\n      >\n        {app.translator.trans(\"flarum-mentions.forum.post.reply_link\")}\n      </Button>\n    );\n  });\n}\n","import { extend } from 'flarum/extend';\nimport CommentPost from 'flarum/components/CommentPost';\n\nimport PostQuoteButton from './components/PostQuoteButton';\nimport selectedText from './utils/selectedText';\n\nexport default function addPostQuoteButton() {\n  extend(CommentPost.prototype, 'config', function(original, isInitialized) {\n    const post = this.attrs.post;\n\n    if (isInitialized || post.isHidden() || (app.session.user && !post.discussion().canReply())) return;\n\n    const $postBody = this.$('.Post-body');\n\n    // Wrap the quote button in a wrapper element so that we can render\n    // button into it.\n    const $container = $('<div class=\"Post-quoteButtonContainer\"></div>');\n\n    const handler = function(e) {\n      setTimeout(() => {\n        const content = selectedText($postBody);\n        if (content) {\n          const button = new PostQuoteButton({post, content});\n          m.render($container[0], button.render());\n\n          const rects = window.getSelection().getRangeAt(0).getClientRects();\n          const firstRect = rects[0];\n\n          if (e.clientY < firstRect.bottom && e.clientX - firstRect.right < firstRect.left - e.clientX) {\n            button.showStart(firstRect.left, firstRect.top);\n          } else {\n            const lastRect = rects[rects.length - 1];\n            button.showEnd(lastRect.right, lastRect.bottom);\n          }\n        }\n      }, 1);\n    };\n\n    this.$().after($container).on('mouseup', handler);\n\n    if ('ontouchstart' in window) {\n      document.addEventListener('selectionchange', handler, false);\n    }\n  });\n}\n","export default function selectedText(body) {\n  const selection = window.getSelection();\n  if (selection.rangeCount) {\n    const range = selection.getRangeAt(0);\n    const parent = range.commonAncestorContainer;\n    if (body[0] === parent || $.contains(body[0], parent)) {\n      const clone = $(\"<div>\").append(range.cloneContents());\n\n      // Replace emoji images with their shortcode (found in alt attribute)\n      clone.find('img.emoji').replaceWith(function() {\n        return this.alt;\n      });\n\n      // Replace all other images with a Markdown image\n      clone.find('img').replaceWith(function() {\n        return '![](' + this.src + ')';\n      });\n\n      // Replace all links with a Markdown link\n      clone.find('a').replaceWith(function() {\n        return '[' + this.innerText + '](' + this.href + ')';\n      });\n\n      return clone.text();\n    }\n  }\n  return \"\";\n}\n","import getCaretCoordinates from \"textarea-caret\";\n\nimport { extend } from \"flarum/extend\";\nimport ComposerBody from \"flarum/components/ComposerBody\";\nimport TextEditor from \"flarum/components/TextEditor\";\nimport TextEditorButton from \"flarum/components/TextEditorButton\";\nimport avatar from \"flarum/helpers/avatar\";\nimport usernameHelper from \"flarum/helpers/username\";\nimport highlight from \"flarum/helpers/highlight\";\nimport KeyboardNavigatable from \"flarum/utils/KeyboardNavigatable\";\nimport { truncate } from \"flarum/utils/string\";\n\nimport AutocompleteDropdown from \"./components/AutocompleteDropdown\";\n\nexport default function addComposerAutocomplete() {\n  extend(ComposerBody.prototype, \"config\", function (original, isInitialized) {\n    if (isInitialized) return;\n\n    const composer = this;\n    const $container = $(\n      '<div class=\"ComposerBody-mentionsDropdownContainer\"></div>'\n    );\n    const dropdown = new AutocompleteDropdown({ items: [] });\n    const $textarea = this.$(\"textarea\").wrap(\n      '<div class=\"ComposerBody-mentionsWrapper\"></div>'\n    );\n    const searched = [];\n    let mentionStart;\n    let typed;\n    let searchTimeout;\n\n    const applySuggestion = function (replacement) {\n      const insert = replacement + \" \";\n\n      // When calling setValue(), mentionStart will be set back to 0 so we need to compute this beforehand\n      const index = mentionStart - 1 + insert.length;\n\n      const content = composer.content();\n      composer.editor.setValue(\n        content.substring(0, mentionStart - 1) +\n          insert +\n          content.substr($textarea[0].selectionStart)\n      );\n\n      composer.editor.setSelectionRange(index, index);\n\n      dropdown.hide();\n    };\n\n    this.navigator = new KeyboardNavigatable();\n    this.navigator\n      .when(() => dropdown.active)\n      .onUp(() => dropdown.navigate(-1))\n      .onDown(() => dropdown.navigate(1))\n      .onSelect(dropdown.complete.bind(dropdown))\n      .onCancel(dropdown.hide.bind(dropdown))\n      .bindTo($textarea);\n\n    $textarea.after($container).on(\"click keyup input\", function (e) {\n      // Up, down, enter, tab, escape, left, right.\n      if ([9, 13, 27, 40, 38, 37, 39].indexOf(e.which) !== -1) return;\n\n      const cursor = this.selectionStart;\n\n      if (this.selectionEnd - cursor > 0) return;\n\n      // Search backwards from the cursor for an '@' symbol. If we find one,\n      // we will want to show the autocomplete dropdown!\n      const value = this.value;\n      mentionStart = 0;\n      for (let i = cursor - 1; i >= cursor - 30; i--) {\n        const character = value.substr(i, 1);\n        if (character === \"@\") {\n          mentionStart = i + 1;\n          break;\n        }\n      }\n\n      dropdown.hide();\n      dropdown.active = false;\n\n      if (mentionStart) {\n        typed = value.substring(mentionStart, cursor).toLowerCase();\n\n        const makeSuggestion = function (\n          user,\n          replacement,\n          content,\n          className = \"\"\n        ) {\n          const username = usernameHelper(user);\n          console.log(\"here!!!\");\n          console.log(username);\n          if (typed) {\n            username.children[0] = highlight(username.children[0], typed);\n          }\n\n          return (\n            <button\n              className={\"PostPreview \" + className}\n              onclick={() => applySuggestion(replacement)}\n              onmouseenter={function () {\n                dropdown.setIndex($(this).parent().index());\n              }}\n            >\n              <span className=\"PostPreview-content\">\n                {avatar(user)}\n                {username} {content}\n              </span>\n            </button>\n          );\n        };\n\n        const userMatches = function (user) {\n          const names = [user.username(), user.displayName()];\n\n          return names.some(\n            (value) => value.toLowerCase().substr(0, typed.length) === typed\n          );\n        };\n\n        const buildSuggestions = () => {\n          const suggestions = [];\n\n          // If the user has started to type a username, then suggest users\n          // matching that username.\n          if (typed) {\n            app.store.all(\"users\").forEach((user) => {\n              if (!userMatches(user)) return;\n\n              suggestions.push(\n                makeSuggestion(\n                  user,\n                  \"@\" + user.username(),\n                  \"\",\n                  \"MentionsDropdown-user\"\n                )\n              );\n            });\n          }\n\n          // If the user is replying to a discussion, or if they are editing a\n          // post, then we can suggest other posts in the discussion to mention.\n          // We will add the 5 most recent comments in the discussion which\n          // match any username characters that have been typed.\n          const composerPost = composer.attrs.post;\n          const discussion =\n            (composerPost && composerPost.discussion()) ||\n            composer.attrs.discussion;\n          if (discussion) {\n            discussion\n              .posts()\n              .filter(\n                (post) =>\n                  post &&\n                  post.contentType() === \"comment\" &&\n                  (!composerPost || post.number() < composerPost.number())\n              )\n              .sort((a, b) => b.createdAt() - a.createdAt())\n              .filter((post) => {\n                const user = post.user();\n                return user && userMatches(user);\n              })\n              .splice(0, 5)\n              .forEach((post) => {\n                const user = post.user();\n                suggestions.push(\n                  makeSuggestion(\n                    user,\n                    \"@\" + user.username() + \"#\" + post.id(),\n                    [\n                      app.translator.trans(\n                        \"flarum-mentions.forum.composer.reply_to_post_text\",\n                        { number: post.number() }\n                      ),\n                      \" — \",\n                      truncate(post.contentPlain(), 200),\n                    ],\n                    \"MentionsDropdown-post\"\n                  )\n                );\n              });\n          }\n\n          if (suggestions.length) {\n            dropdown.attrs.items = suggestions;\n            m.render($container[0], dropdown.render());\n\n            dropdown.show();\n            const coordinates = getCaretCoordinates(this, mentionStart);\n            const width = dropdown.$().outerWidth();\n            const height = dropdown.$().outerHeight();\n            const parent = dropdown.$().offsetParent();\n            let left = coordinates.left;\n            let top = coordinates.top - this.scrollTop + 15;\n            if (top + height > parent.height()) {\n              top = coordinates.top - this.scrollTop - height - 15;\n            }\n            if (left + width > parent.width()) {\n              left = parent.width() - width;\n            }\n            dropdown.show(left, top);\n          } else {\n            dropdown.active = false;\n            dropdown.hide();\n          }\n        };\n\n        dropdown.active = true;\n\n        buildSuggestions();\n\n        dropdown.setIndex(0);\n        dropdown.$().scrollTop(0);\n\n        clearTimeout(searchTimeout);\n        if (typed) {\n          searchTimeout = setTimeout(function () {\n            const typedLower = typed.toLowerCase();\n            if (searched.indexOf(typedLower) === -1) {\n              app.store\n                .find(\"users\", { filter: { q: typed }, page: { limit: 5 } })\n                .then(() => {\n                  if (dropdown.active) buildSuggestions();\n                });\n              searched.push(typedLower);\n            }\n          }, 250);\n        }\n      }\n    });\n  });\n\n  extend(TextEditor.prototype, \"toolbarItems\", function (items) {\n    items.add(\n      \"mention\",\n      <TextEditorButton\n        onclick={() => this.insertAtCursor(\"@\")}\n        icon=\"fas fa-at\"\n      >\n        {app.translator.trans(\"flarum-mentions.forum.composer.mention_tooltip\")}\n      </TextEditorButton>\n    );\n  });\n}\n","import { extend, override } from \"flarum/extend\";\nimport Post from \"flarum/components/Post\";\nimport Button from \"flarum/components/Button\";\nimport icon from \"flarum/helpers/icon\";\nimport CommentPost from \"flarum/components/CommentPost\";\n\nexport default function MakeTree() {\n  override(Post.prototype, \"config\", function() {\n    const $actions = this.$(\".Post-actions\");\n    const $controls = this.$(\".Post-controls\");\n\n    $controls.on(\"click tap\", function() {\n      $(this).toggleClass(\"open\");\n    });\n  });\n\n  extend(Post.prototype, \"oncreate\", function(vdom) {\n    const id = this.attrs.post.id();\n    //console.log(\"postid\", this.attrs.post.id());\n    let include = \"discussion,user,user.groups,hiddenUser,editedUser,\";\n    if (app.initializers.has(\"fof-gamification\")) {\n      include += \"user.ranks,upvotes,\";\n    }\n    if (app.initializers.has(\"fof/reactions\")) {\n      include += \"reactions\";\n    }\n    //console.log(app.store);\n    //app.store.find(\"trees\", id, { include: include.replace(/,\\s*$/, \"\") });\n    app.alerts.clear();\n    app.store\n      .find<Post[]>(\"trees\", id, { include: include.replace(/,\\s*$/, \"\") })\n      .then((response) => {\n        //console.log(\"id is \", id);\n        //console.log(\"children\", response);\n        this.uniquePosts = response\n          .filter(\n            (thing, index, self) =>\n              self.findIndex((t) => t.id() === thing.id()) === index\n          )\n          .sort((a, b) => {\n            return a.createdAt() - b.createdAt();\n          })\n          .map((post) => {\n            return CommentPost.component({ post });\n          });\n        m.redraw();\n      });\n    //app.alerts.clear();\n    //m.redraw();\n  });\n  extend(Post.prototype, \"view\", function(vdom) {\n    const id = this.attrs.post.id();\n    //console.log(m.version);\n    //console.log(\"casjbcajb\");\n    if (!app.cache.trees) {\n      app.cache.trees = {};\n      app.cache.pushTree = {};\n    }\n    if (!app.cache.trees[id]) {\n      app.cache.trees[id] = [];\n      app.cache.pushTree[id] = 0;\n    }\n\n    //if (app.cache.trees[id].length > 0) {\n    /*\n    console.log(\"redrawed2\");\n    m.redraw();\n    let include = \"discussion,user,user.groups,hiddenUser,editedUser,\";\n    posts = app.store\n      .find(\"trees\", id, { include: include.replace(/,\\s*$/, \"\") })\n      .then((response) => {\n        console.log(\"id is \", id);\n        console.log(\"children\", response);\n        response1 = response\n          .filter(\n            (thing, index, self) =>\n              self.findIndex((t) => t.id() === thing.id()) === index\n          )\n          .sort((a, b) => {\n            return a.createdAt() - b.createdAt();\n          })\n          .map((post) => {\n            return CommentPost.component({ post });\n          });\n      });\n    this.uniquePosts = uniquePosts;\n    m.redraw();\n    */\n    if (app.initializers.has(\"fof-gamification\")) {\n      include += \"user.ranks,upvotes,\";\n    }\n    if (app.initializers.has(\"fof/reactions\")) {\n      include += \"reactions\";\n    }\n    if (this.uniquePosts) {\n      vdom.children.push(\n        <div className=\"CommentTree\" id={id}>\n          {icon(\"fas fa-reply\")}\n          {this.uniquePosts}\n        </div>\n      );\n      //m.redraw();\n    }\n    /*\n    if (\n      this.attrs.post.replyCount() >\n        app.cache.trees[id].length - app.cache.pushTree[id] ||\n      (app.cache.trees[id].length === 0 && this.attrs.post.replyCount())\n    ) {\n      const count =\n        this.attrs.post.replyCount() -\n        app.cache.trees[id].length +\n        app.cache.pushTree[id];\n      let include = \"discussion,user,user.groups,hiddenUser,editedUser,\";\n      if (app.initializers.has(\"fof-gamification\")) {\n        include += \"user.ranks,upvotes,\";\n      }\n      if (app.initializers.has(\"fof/reactions\")) {\n        include += \"reactions\";\n      }\n      vdom.children.push(\n        Button.component(\n          {\n            className: \"Button Button--link Evergreen--show\",\n            icon: \"fas fa-caret-down\",\n            disabled: false,\n            onclick: () => {\n              app.store\n                .find(\"trees\", id, { include: include.replace(/,\\s*$/, \"\") })\n                .then((response) => {\n                  //delete response.payload;\n                  //console.log(response);\n                  //m.redraw.strategy(\"all\");\n                  console.log(\"set to all\");\n                  [].push.apply(app.cache.trees[id], response);\n                  console.log(\"tree cached\", app.cache.trees[id]);\n                  console.log(\"added to post\", id);\n                  //vdom.reload += 1; //force state change\n                  console.log(\"forceredraw on \");\n                  vdom.state.forceredraw = 1;\n                  this.uniqueKey = Date.now();\n                  console.log(this.uniqueKey);\n                  this.loading = true;\n                  m.redraw(\"true\");\n                  setTimeout(() => m.redraw(), 0.01);\n                  setTimeout(() => m.redraw(), 0.01);\n                  vdom.state.forceredraw = 0;\n                  this.loading = false;\n                  this.onupdate(vdom);\n                  console.log(\"redrawed1\");\n                  m.redraw(\"true\");\n                  setTimeout(() => m.redraw(), 0.01);\n                });\n            },\n          },\n          app.translator.trans(\n            \"kyrne-evergreen.forum.post.show_\" +\n              (count > 1 ? \"replies\" : \"reply\"),\n            { count }\n          )\n        )\n      );\n    }\n    console.log(\"redrawed\");\n    m.redraw();\n    */\n  });\n}\n"],"names":["properties","isBrowser","window","isFirefox","mozInnerScreenX","getCaretCoordinates","element","position","options","Error","debug","el","document","querySelector","parentNode","removeChild","div","createElement","id","body","appendChild","style","computed","getComputedStyle","currentStyle","isInput","nodeName","whiteSpace","wordWrap","visibility","forEach","prop","lineHeight","height","scrollHeight","parseInt","overflowY","overflow","textContent","value","substring","replace","span","coordinates","top","offsetTop","left","offsetLeft","backgroundColor","module","exports","_typeof","require","_regeneratorRuntime","e","__esModule","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","this","d","getPrototypeOf","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","key","get","obj","flarum","core","compat","asyncGeneratorStep","gen","reject","_next","_throw","info","error","_asyncToGenerator","fn","self","args","arguments","apply","err","insertMention","post","composer","quote","user","mention","username","number","fields","content","attrs","originalContent","cursorPosition","editor","getSelectionRange","preceding","precedingNewlines","match","insertAtCursor","Array","join","trim","reply","_x","_x2","_reply","_callee","replyId","_context","app","bodyMatches","EditPostComposer","discussion","replyTo","DiscussionControls","_setPrototypeOf","bind","_inheritsLoose","subClass","superClass","PostQuoteButton","_Button","_proto","view","_this","extract","className","icon","children","translator","trans","onclick","hide","onmousedown","stopPropagation","config","isInitialized","$","on","show","$this","parentOffset","offsetParent","offset","css","showStart","scrollTop","outerHeight","showEnd","right","bottom","outerWidth","Button","AutocompleteDropdown","_Component","init","active","index","keyWasJustPressed","m","items","map","item","navigate","delta","setIndex","clearTimeout","keyWasJustPressedTimeout","setTimeout","eq","find","click","scrollToItem","$dropdown","$items","rangedIndex","$item","removeClass","addClass","dropdownScroll","dropdownTop","dropdownBottom","itemTop","itemBottom","animate","Component","PostMentionedNotification","_Notification","href","notification","subject","route","replyNumber","fromUser","transChoice","excerpt","truncate","contentPlain","Notification","UserMentionedNotification","MentionsUserPage","_PostsUserPage","loadResults","store","filter","mentioned","page","limit","loadLimit","sort","PostsUserPage","filterUserMentions","tag","getBy","getAttribute","setAttribute","extractText","filterPostMentions","getById","add","Post","Model","replyCount","goToLast","forceRefresh","canReply","composingReplyTo","load","ReplyComposer","isFullScreen","goToNumber","LogInModal","extend","data","override","_this2","loading","redraw","createRecord","save","draft","stream","update","console","log","sync","alert","viewButton","set","dismiss","controls","loaded","addPreviews","contentHtml","oldPostContentHtml","isEditing","parentPost","$parentPost","preventDefault","each","timeout","$preview","append","getPostElement","showPreview","$post","visible","pageYOffset","positionPreview","previewHeight","width","showPost","render","title","PostPreview","LoadingIndicator","off","hidePreview","hasClass","one","cancelable","hover","CommentPost","addPostMentionPreviews","mentionedBy","replies","is","users","repliers","session","indexOf","overLimit","names","Link","count","punctuateSeries","addMentionedByList","isHidden","original","$postBody","$container","handler","selection","getSelection","rangeCount","range","getRangeAt","parent","commonAncestorContainer","contains","clone","cloneContents","replaceWith","alt","src","innerText","text","selectedText","button","rects","getClientRects","firstRect","clientY","clientX","lastRect","after","addEventListener","ComposerBody","mentionStart","typed","searchTimeout","dropdown","$textarea","searched","navigator","KeyboardNavigatable","when","onUp","onDown","onSelect","onCancel","bindTo","which","cursor","selectionStart","selectionEnd","substr","toLowerCase","makeSuggestion","replacement","usernameHelper","highlight","insert","setValue","setSelectionRange","applySuggestion","onmouseenter","avatar","userMatches","some","buildSuggestions","suggestions","all","composerPost","posts","contentType","b","createdAt","splice","typedLower","q","TextEditor","TextEditorButton","toggleClass","vdom","include","initializers","has","alerts","clear","response","uniquePosts","thing","findIndex","cache","trees","pushTree","postMentioned","userMentioned","NotificationGrid","label","path","component","UserPage","LinkButton","slug","getPlainContent","removeSelectors","uniqueKey","Date","now","vnode"],"sourceRoot":""}